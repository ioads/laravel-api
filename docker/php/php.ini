; Basic Settings
max_execution_time = 30            ; Shorter execution time to avoid long-running scripts
memory_limit = 128M                ; Limit memory usage per script to avoid memory leaks
post_max_size = 16M                ; Restrict POST data size for security and resource management
upload_max_filesize = 16M          ; Restrict file upload size for stability
max_input_time = 30                ; Shorter input parsing time to avoid DoS attacks
max_input_vars = 2000              ; Limit the number of input variables to prevent hash collisions

; High-traffic User Adjustments
realpath_cache_size = 4096K        ; Increase realpath cache size for better file path resolution performance
realpath_cache_ttl = 600           ; Cache file paths for 10 minutes to improve performance

; Resource Limits for Stability
max_file_uploads = 10              ; Reduce simultaneous file uploads for stability

; Security Settings
expose_php = Off                   ; Hide PHP version from HTTP headers to reduce attack surface

; Disable Sessions
session.save_handler = "null"      ; Disable session storage
session.save_path = "/dev/null"    ; Prevent sessions from being saved
session.use_cookies = 0            ; Disable cookies for session management
session.use_trans_sid = 0          ; Disable URL-based session IDs
session.auto_start = 0             ; Ensure sessions are not started automatically

; Error Reporting and Logging
display_errors = Off               ; Hide errors from users to prevent leakage of sensitive data
log_errors = Off                   ; Disable logging errors to a file (use external tools like Elastic APM)
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT ; Report all errors except deprecated and strict notices

; Input Validation and Security
enable_post_data_reading = On      ; Enable reading of POST data
allow_url_fopen = On               ; Enable URL opening for remote resources
allow_url_include = Off            ; Disable URL includes to reduce security risks
file_uploads = On                  ; Allow file uploads (turn off if not required)

; Logging and Monitoring
log_errors_max_len = 1024          ; Limit error log length for readability
track_errors = Off                 ; Disable tracking of PHP errors in variables

; File and Path Security
open_basedir = /var/www:/tmp       ; Restrict file access to specific directories
disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source ; Disable risky functions for added security

; Memory and Resource Management
pcre.jit = 1                       ; Enable JIT for regular expressions for performance
output_buffering = 4096            ; Enable output buffering for better performance
